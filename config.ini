[colors]
background = #1E1E2E
foreground = #CDD6F4
primary = #e100ff
secondary = #A6ADC8
alert = #F38BA8
ok = #A6E3A1
warning = #F9E2AF
gray = #313244

[styling]
; Module styling preferences
module-padding = 1
module-margin = 1
separator = |
separator-foreground = ${colors.gray}

; Icon colors - all icons use primary purple except power button
icon-primary = ${colors.primary}
icon-secondary = ${colors.primary}
icon-alert = ${colors.primary}
icon-ok = ${colors.primary}
icon-warning = ${colors.primary}
icon-power = #FF0000

; Text formatting
label-active-foreground = #0b0e14
label-occupied-foreground = ${colors.foreground}
label-empty-foreground = ${colors.secondary}
label-urgent-foreground = ${colors.foreground}
label-muted-foreground = ${colors.secondary}

[bar/primary]
width = 100%
height = ${env:POLYBAR_HEIGHT:36}
radius = ${env:POLYBAR_RADIUS:12}
top = true
background = ${colors.background}
foreground = ${colors.foreground}
line-size = 2
line-color = ${colors.primary}
border-size = 3
border-color = #00000000
padding-left = 0
padding-right = 1
module-margin = ${styling.module-margin}
separator = "|"
separator-foreground = ${styling.separator-foreground}
fixed-center = true
cursor-scroll = ns-resize
enable-ipc = true
override-redirect = false

# Show the system tray only on the primary bar
tray-position = right
tray-background = ${colors.background}
tray-padding = 4
tray-maxsize = ${env:POLYBAR_TRAY_SIZE:18}

; Enhanced fonts for better icons
font-0 = JetBrains Mono:style=Medium:size=10:antialias=true:hinting=true
font-1 = Symbols Nerd Font Mono:style=Regular:size=13:antialias=true
font-2 = Font Awesome 6 Free:style=Solid:size=12:antialias=true
font-3 = Font Awesome 6 Brands:style=Regular:size=12:antialias=true

modules-left = xworkspaces xwindow date
modules-center =
modules-right = bluetooth pulseaudio battery memory cpu powermenu

[bar/secondary]
width = 100%
height = ${env:POLYBAR_HEIGHT:36}
radius = ${env:POLYBAR_RADIUS:12}
top = true
background = ${colors.background}
foreground = ${colors.foreground}
line-size = 2
line-color = ${colors.primary}
border-size = 3
border-color = #00000000
padding-left = 0
padding-right = 1
module-margin = ${styling.module-margin}
separator = "|"
separator-foreground = ${styling.separator-foreground}
fixed-center = true
cursor-scroll = ns-resize
enable-ipc = true
override-redirect = false

# Disable tray on secondary bars
tray-position = none
tray-background = ${colors.background}
tray-padding = 4
tray-maxsize = ${env:POLYBAR_TRAY_SIZE:18}
modules-left = xworkspaces xwindow date
modules-right = bluetooth pulseaudio battery memory cpu powermenu

[module/xworkspaces]
type = internal/xworkspaces
label-active = %index%
label-active-background = ${colors.primary}
label-active-underline = ${colors.primary}
label-active-padding = ${styling.module-padding}
label-active-foreground = ${styling.label-active-foreground}
label-occupied = %index%
label-occupied-padding = ${styling.module-padding}
label-occupied-foreground = ${styling.label-occupied-foreground}
label-urgent = %index%
label-urgent-background = ${colors.alert}
label-urgent-padding = ${styling.module-padding}
label-urgent-foreground = ${styling.label-urgent-foreground}
label-empty = %index%
label-empty-foreground = ${styling.label-empty-foreground}
label-empty-padding = ${styling.module-padding}

[module/xkeyboard]
type = internal/xkeyboard
blacklist-0 = num lock
label-layout = %layout%
label-layout-foreground = ${styling.icon-primary}

[module/xwindow]
type = internal/xwindow
tail = true
format-prefix = "  "
format-prefix-foreground = ${styling.icon-primary}

[module/memory]
type = internal/memory
interval = 1
format-prefix = "󰍛 "
format-prefix-foreground = ${styling.icon-primary}
label = %percentage_used:2%%
format = <label>
click-left = bash -lc '({ command -v btop && (alacritty -e btop || kitty -e btop || gnome-terminal -- btop || xfce4-terminal -e btop) ; } &>/dev/null & disown) || ({ command -v htop && (alacritty -e htop || kitty -e htop || gnome-terminal -- htop || xfce4-terminal -e htop); } &>/dev/null & disown)'

[module/battery]
type = internal/battery
battery = BAT0
adapter = AC
full-at = 98
poll-interval = 5
format-charging = <animation-charging> <label-charging>
format-discharging = <ramp-capacity> <label-discharging>
format-full = 󰁹 <label-full>
label-charging = %percentage%%
label-discharging = %percentage%%
label-full = %percentage%%
ramp-capacity-0 = 󰁺
ramp-capacity-1 = 󰁻
ramp-capacity-2 = 󰁼
ramp-capacity-3 = 󰁽
ramp-capacity-4 = 󰁾
ramp-capacity-foreground = ${styling.icon-secondary}
animation-charging-0 = 󰢜
animation-charging-1 = 󰂆
animation-charging-2 = 󰂇
animation-charging-3 = 󰂈
animation-charging-4 = 󰢝
animation-charging-foreground = ${styling.icon-primary}
animation-charging-framerate = 750
click-left = bash -lc 'command -v gnome-power-statistics >/dev/null && gnome-power-statistics & disown || (command -v xfce4-power-manager-settings >/dev/null && xfce4-power-manager-settings & disown) || notify-send "Battery" "No power UI found" -u low'

[module/cpu]
type = internal/cpu
interval = 2
format-prefix = "󰘚 "
format-prefix-foreground = ${styling.icon-primary}
label = %percentage:2%%
format = <label>
click-left = bash -lc '({ command -v btop && (alacritty -e btop || kitty -e btop || gnome-terminal -- btop || xfce4-terminal -e btop) ; } &>/dev/null & disown) || ({ command -v htop && (alacritty -e htop || kitty -e htop || gnome-terminal -- htop || xfce4-terminal -e htop); } &>/dev/null & disown)'


[module/network]
type = custom/script
exec = ~/.config/polybar/scripts/network_info.sh
tail = true
interval = 0
format = <label>
label = %output%
click-left = bash -lc 'command -v nm-connection-editor >/dev/null && nm-connection-editor & disown || (alacritty -e nmtui || kitty -e nmtui || gnome-terminal -- nmtui || xfce4-terminal -e nmtui) & disown'

[module/pulseaudio]
type = internal/pulseaudio
format-volume-prefix = "󰕾 "
format-volume-prefix-foreground = ${styling.icon-primary}
format-volume = <label-volume>
label-volume = %percentage%%
format-muted-prefix = "󰖁 "
format-muted-prefix-foreground = ${styling.label-muted-foreground}
label-muted = muted
label-muted-foreground = ${styling.label-muted-foreground}
click-left = pactl set-sink-mute @DEFAULT_SINK@ toggle
click-middle = bash -lc 'command -v pavucontrol >/dev/null && pavucontrol & disown'
scroll-up = pactl set-sink-volume @DEFAULT_SINK@ +5%
scroll-down = pactl set-sink-volume @DEFAULT_SINK@ -5%

[module/bluetooth]
type = custom/script
exec = ~/.config/polybar/scripts/bluetooth.sh
interval = 5
format = <label>
click-left = bash -lc '~/.config/polybar/scripts/bluetooth.sh --toggle &'
click-right = bash -lc '~/.config/polybar/scripts/bluetooth_menu.sh &'
click-middle = bash -lc 'command -v blueman-manager >/dev/null && blueman-manager & disown'

[module/date]
type = internal/date
interval = 1
date = %H:%M
date-alt = %a, %d %b %Y %H:%M:%S
label =   %date%
label-foreground = ${styling.icon-primary}
click-left = bash -lc '~/.config/polybar/scripts/calendar.sh &'

[module/temperature]
type = custom/script
exec = ~/.config/polybar/scripts/temperature.sh
interval = 5
format-prefix = "󰏈 "
format-prefix-foreground = ${styling.icon-primary}
label = %output%°C
warn-temperature = 65
format-warn = <ramp> <label-warn>
format-warn-foreground = ${styling.icon-warning}
ramp-0 = 󰏈
ramp-1 = 󰸁
ramp-2 = 󱃃
ramp-foreground = ${styling.icon-primary}

[module/backlight]
type = internal/backlight
card = intel_backlight
format = <ramp> <label>
label = %percentage%%
ramp-0 = 󰃞
ramp-1 = 󰃟
ramp-2 = 󰃠
ramp-foreground = ${styling.icon-primary}
scroll-up = brightnessctl s +5%
scroll-down = brightnessctl s 5%-


[module/powermenu]
type = custom/text
format = <label>
label = 󰐥
label-foreground = ${styling.icon-power}
click-left = bash -lc '~/.config/polybar/scripts/powermenu.sh &'

[settings]
screenchange-reload = true
pseudo-transparency = true
